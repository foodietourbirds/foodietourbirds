function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.InstagramFeed=t()}(this,(function(){function e(e){return e.replace(/[&<>"'`=\/]/g,(function(e){return o[e]}))}var t={host:"https://www.instagram.com/",username:"",tag:"",container:"",display_profile:!0,display_biography:!0,display_gallery:!0,display_igtv:!1,get_data:!1,callback:null,styling:!0,items:8,items_per_row:4,margin:.5,image_size:640},i={150:0,240:1,320:2,480:3,640:4},o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return function(o){this.options=Object.assign({},t),this.options=Object.assign(this.options,o),this.is_tag=""==this.options.username,this.valid=!0,""==this.options.username&&""==this.options.tag?(console.error("InstagramFeed: Error, no username or tag defined."),this.valid=!1):this.options.get_data||""!=this.options.container?this.options.get_data&&"function"!=typeof this.options.callback&&(console.error("InstagramFeed: Error, invalid or undefined callback for get_data"),this.valid=!1):(console.error("InstagramFeed: Error, no container found."),this.valid=!1),this.get=function(e){var t=this.is_tag?this.options.host+"explore/tags/"+this.options.tag+"/":this.options.host+this.options.username+"/",i=new XMLHttpRequest,o=this;i.onload=function(){if(4===i.readyState)if(200===i.status){var t=i.responseText.split("window._sharedData = ")[1].split("<\/script>")[0];if(void 0===(t=(t=JSON.parse(t.substr(0,t.length-1))).entry_data.ProfilePage||t.entry_data.TagPage))return void console.error("Instagram Feed: It looks like YOUR network has been temporary banned because of too many requests. See https://github.com/jsanahuja/jquery.instagramFeed/issues/25");e(t=t[0].graphql.user||t[0].graphql.hashtag,o)}else console.error("InstagramFeed: Request error. Response: "+i.statusText)},i.open("GET",t,!0),i.send()},this.parse_caption=function(e,t){return void 0!==e.node.edge_media_to_caption.edges[0]&&void 0!==e.node.edge_media_to_caption.edges[0].node&&null!=e.node.edge_media_to_caption.edges[0].node.text?e.node.edge_media_to_caption.edges[0].node.text:null!=e.node.title&&0!=e.node.title.length?e.node.title:null!=e.node.accessibility_caption&&0!=e.node.accessibility_caption.length?e.node.accessibility_caption:(this.is_tag?t.name:t.username)+" image "},this.display=function(t){if(this.options.styling)var o={profile_container:" style='text-align:center;'",profile_image:" style='border-radius:10em;width:15%;max-width:125px;min-width:50px;'",profile_name:" style='font-size:1.2em;'",profile_biography:" style='font-size:1em;'",gallery_image:" style='margin:"+this.options.margin+"% "+this.options.margin+"%;width:"+(100-2*this.options.margin*this.options.items_per_row)/this.options.items_per_row+"%;float:left;'"};else o={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:""};var s="";if(this.options.display_profile&&(s+="<div class='instagram_profile'"+o.profile_container+">",s+="<img class='instagram_profile_image' src='"+t.profile_pic_url+"' alt='"+(this.is_tag?t.name+" tag pic":t.username+" profile pic")+" profile pic'"+o.profile_image+" />",s+=this.is_tag?"<p class='instagram_tag'"+o.profile_name+"><a href='https://www.instagram.com/explore/tags/"+this.options.tag+"' rel='noopener' target='_blank'>#"+this.options.tag+"</a></p>":"<p class='instagram_username'"+o.profile_name+">@"+t.full_name+" (<a href='https://www.instagram.com/"+this.options.username+"' rel='noopener' target='_blank'>@"+this.options.username+"</a>)</p>",!this.is_tag&&this.options.display_biography&&(s+="<p class='instagram_biography'"+o.profile_biography+">"+t.biography+"</p>"),s+="</div>"),this.options.display_gallery){var a=void 0===i[this.options.image_size]?i[640]:i[this.options.image_size];if(void 0!==t.is_private&&!0===t.is_private)s+="<p class='instagram_private'><strong>This profile is private</strong></p>";else{var n=(t.edge_owner_to_timeline_media||t.edge_hashtag_to_media).edges;_=n.length>this.options.items?this.options.items:n.length,s+="<div class='instagram_gallery'>";for(var r=0;r<_;r++){var p,l,g="https://www.instagram.com/p/"+n[r].node.shortcode,d=e(this.parse_caption(n[r],t));switch(n[r].node.__typename){case"GraphSidecar":l="sidecar",p=n[r].node.thumbnail_resources[a].src;break;case"GraphVideo":l="video",p=n[r].node.thumbnail_src;break;default:l="image",p=n[r].node.thumbnail_resources[a].src}this.is_tag&&(t.username=""),s+="<a href='"+g+"' class='instagram-"+l+"' title='"+d+"' rel='noopener' target='_blank'>",s+="<img src='"+p+"' alt='"+d+"'"+o.gallery_image+" />",s+="</a>"}s+="</div>"}}if(this.options.display_igtv&&void 0!==t.edge_felix_video_timeline){var h=t.edge_felix_video_timeline.edges,_=h.length>this.options.items?this.options.items:h.length;if(0<h.length){for(s+="<div class='instagram_igtv'>",r=0;r<_;r++)s+="<a href='"+(g="https://www.instagram.com/p/"+h[r].node.shortcode)+"' rel='noopener' title='"+(d=this.parse_caption(h[r],t))+"' target='_blank'>",s+="<img src='"+h[r].node.thumbnail_src+"' alt='"+d+"'"+o.gallery_image+" />",s+="</a>";s+="</div>"}}this.options.container.innerHTML=s},this.run=function(){this.get((function(e,t){t.options.get_data?t.options.callback(e):t.display(e)}))},this.valid&&this.run()}}));